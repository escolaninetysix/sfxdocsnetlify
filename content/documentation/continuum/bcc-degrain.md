{
"date": "2019-06-12",
"title": "BCC DeGrain",
"category": "BCC Obsolete",
"link": "bcc-degrain/"
}

 ### *Deprecated – replaced by [BCC Noise Reduction](/documentation/continuum/bcc-noise-reduction)*


*We recommend use of [BCC Noise Reduction](/documentation/continuum/bcc-noise-reduction) instead of BCC Degrain.  The newer BCC Noise Reduction filter contains more advanced grain suppression techniques that minimize the “ringing” artifacts that can be generated by the older Degrain filter.*


### Overview


BCC DeGrain removes grain-sized noise from an image by analyzing a sample of the grain, then filtering out image noise that has similar frequency (spectrum) and amplitude.


### Function


**Presets and Common Controls**


BCC filters come with a library of factory installed presets plus the ability to create your own custom presets and preview them with the BCC FX Browser™.


BCC filters also include common controls that configure global effect preferences and other host-specific effect settings.


For more information about working with presets and other common controls, [Click Here](/documentation/continuum/bcc-common-controls/).

 


**Compare Mode**


The BCC Compare Mode provides a convenient mechanism to compare the effect result with the original source layer. It provides several variations on basic split-screen views with the filtered clip placed next to the unedited original.


For more information on the Compare Mode,[Click Here](/documentation/continuum/bcc-compare-mode/).

 


The **View menu** sets the display. You must set this menu to Final Output before your final render.


* *Final Output* displays the final image, after the grain has been removed. You must set the View menu to Final Output before rendering.
* *Sample Layer* is used for selecting the area containing a grain sample. A suitable area should have no detail other than grain. Small samples should be used unless the grain is unusually large.
* *Removed Grain* shows the grain that is being removed from the image Use this setting to ensure that no significant image details are being removed.


* Warning: Set the **View menu** to *Final Output* before rendering.


Adjusting **View Contrast** allows you to see the grain that is removed more clearly. The View Contrast parameter is available when the View menu is set to Removed Grain.


When the **Setup menu** is set to *Normal*, you can manually adjust the rest of the parameters in the tab to remove the grain in the image. Alternately, you can use the numbered steps in the **Setup menu** to remove the grain in four easy stages. If you remove the grain using the four steps, each step activates only certain parameters in order to make the process easier.


When the **Lock Sample checkbox** is deselected, the filter acquires and processes a grain sample each time it calculates a frame. Select the Lock Sample checkbox to retain the current grain sample. The sample determines the characteristics of the grain that is filtered out by DeGrain.


The four steps in the Setup menu you use to remove grain are described below.


* Note: When you select each step, only certain parameters become active. See the descriptions of each of the controls later in this section.
* Note: Before you begin, load the media you want to filter in the Sample Layer Track in the timeline. To do this, first select the Use Sample Layer Track checkbox in the Sample Controls tab. See “Sample Controls Tab” below.


1. The first step is to choose *Select Sample* and select a sample area for grain removal. The sample area can be anywhere from 16 to 64 pixels square and must be placed within the image clip. If the sample area is set in such a way that the image area covered is less that 16×16 pixels, a red “X” will display in the sample box showing that the sample size box does not provide enough image data to generate a sample.


Use the Sample Size, Sample Center X, Sample Center Y, Sample Frame # and Mix with Original controls in this step.


2. The second step is to choose *Blur Grain* to set the amount of grain to be removed.  Increase the Filter Strength parameter in this step just high enough so that the grain is removed. Ignore any effect on the image detail, which will be recovered in the last step.


Use the Filter Strength control in this step.


3. The third step is to choose *Suppress Ripples*. When you choose Suppress Ripples, you can modify the HiPass parameter to reduce the visibility of “ripples” in the final image.


Use the HiPass Filter control in this step.


4. The last stage is *Restore Detail*. This step activates the Threshold parameter which allows you to fine-tune how much amplitude or contrast the grain has. Image detail with a higher amplitude is retained and the grain (which has a lower contrast) is suppressed.


Use the Threshold parameter in this step.


**Filter Strength** determines the amount of blurring used to remove the grain.


Use **HiPass Filter** to remove or reduce the amount of low frequency artifacts (which usually look like ripples) that are introduced as a result of removing the grain from the image.


**Threshold** is used to set the amplitude of the grain. Image detail with a higher amplitude is retained, and grain with a lower amplitude is suppressed.


**Edge** **Padding** is used to eliminate artifacting or distortions near the edges. Set this parameter to a higher number if streaks appear at the edges of the image.


**Mix with Original** blends the source and filtered images. Use this parameter to animate the effect from the unfiltered to the filtered image without adjusting other settings, or to reduce the effect of the filter by mixing it with the source image. At a value of 0, the image is unaffected by the filter.


 


**Sample Controls Parameter Group**


Manually adjust the parameters in the Sample Controls Parameter Group to remove the grain in the image.


The DeGrain filter uses alternate frames received from the source image to smooth the noise artifacts. In order to read these frames from the source image, you must assign media to the **Sample Layer menu**.


* Warning: Media must be assigned to this menu or the filter renders black. The default media assigned to the Sample Layer is *None*.


Set **Sample** **Size** from a minimum of 16 (pixels) to a maximum of 64 (pixels). If your image has a large grain structures, setting a higher sample area may produce a better result although it can create low-frequency “ripples” in the image if the sample is not uniform (such as a sky with a large-scale variation in color or brightness).


The **Sample** **Center** position controls set the horizontal and vertical position of the center of the sample area.


**Sample Frame #** is the frame number of the video track used for sampling. Normally, this is left at 0, so that the sample is taken from the first frame of the track.


**Filter Strength** determines the amount of blurring used to remove the grain.


Use **HiPass Filter** to remove or reduce the amount of low frequency artifacts (which usually look like ripples) that are introduced as a result of removing the grain from the image.


**Threshold** is used to set the amplitude of the grain. Image detail with a higher amplitude is retained, and grain with a lower amplitude is suppressed.


**Edge** **Padding** is used to eliminate artifacting or distortions near the edges. Increase this value if streaks appear at the edges of the image.


**Mix with Original** blends the source and filtered images. Use this parameter to animate the effect from the unfiltered to the filtered image without adjusting other settings, or to reduce the effect of the filter by mixing it with the source image. At a value of 0, the image is unaffected by the filter.


 


**PixelChooser**


The BCC PixelChooser provides simple, built-in masking of the effect result.  The PixelChooser is generally used to select a portion of the image and restrict an effect to just the selected area while maintaining the original image content in unselected regions.  The selection can be based on geometric shapes or on the image’s luma/color properties.


For more information on the PixelChooser, [Click Here](/documentation/continuum/bcc-pixel-chooser/).

 