{
   "title": "Sapphire Plug-ins for Autodesk: GlareMaskCmp",
   "date": "2018-12-13T00:00:00",
   "thumbnail_url": "//cdn.borisfx.com/documentation/sapphire/GlareMaskCmp.jpg"
}
 <font size="1">
 </font>
 <table border="0" cellpadding="0" cellspacing="0" width="100%">
  <tr>
   <td valign="top">
    <a name="GlareMaskCmp">
     <h2>
      GlareMaskCmp
     </h2>
    </a>
    Generates rainbow halos and/or glint-like rays at
  locations where the Source clip is brighter than the threshold.
  Each glare's color is scaled by the color of the Mask input, and
  then the glares are combined with the Back input clip.  This is
  similar to Glare, but here a Mask input is provided, and also the
  glint source and background can be different clips.
    <h3>
     Inputs:
    </h3>
    <dl>
     <dd>
      <b>
       Front:
      </b>
      The clip to use as foreground.
     </dd>
    </dl>
    <p>
    </p>
    <dl>
     <dd>
      <b>
       Back:
      </b>
      The clip to combine the glares with.
     </dd>
    </dl>
    <p>
    </p>
    <dl>
     <dd>
      <b>
       Matte:
      </b>
      Specifies the opacities of the Front clip.  These
  values are scaled by the Source Opacity parameter before being used.
     </dd>
    </dl>
    <p>
    </p>
    <dl>
     <dd>
      <b>
       Mask:
      </b>
      The source glare colors are scaled by this input.  A
  monochrome Mask can be used to choose a subset of Source areas that
  will generate glares.  A color Mask can be used to selectively adjust
  the glare colors in different regions.  The Mask is applied to the
  source before the glares are generated so it will not clip the
  resulting glares.
     </dd>
    </dl>
   </td>
   <td>
   </td>
   <td align="right" valign="top" width="244">
    <table border="0" cellpadding="2" cellspacing="0">
     <tr>
      <td bgcolor="#404040" height="162" valign="center" width="240">
       <img align="center" alt="" height="162" src="//cdn.borisfx.com/documentation/sapphire/GlareMaskCmp.jpg" valign="bottom" width="240"/>
      </td>
     </tr>
    </table>
   </td>
  </tr>
 </table>
 <p>
 </p>
 <h3>
  Parameters:
 </h3>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Load Preset:
   </b>
   <i>
    Push-button
   </i>
   .
   <br/>
   Brings up the Preset Browser to browse all available presets for this effect.
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Save Preset:
   </b>
   <i>
    Push-button
   </i>
   .
   <br/>
   Brings up the Preset Save dialog to save a preset for this effect.
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Type:
   </b>
   <i>
    Default:
   </i>
   0,
   <i>
    Range:
   </i>
   0 or greater.
   <br/>
   The style of glare to apply.  Custom glare types can also be
  made, or existing types modified, by editing the "s_glares.text"
  file.
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Convolve:
   </b>
   <i>
    Check-box,  Default:
   </i>
   off.
   <br/>
   Determines the method for applying the glares to the
  Background.
   <br/>
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Size:
   </b>
   <i>
    Default:
   </i>
   1,
   <i>
    Range:
   </i>
   0 or greater.
   <br/>
   Scales the size of the glares.  This parameter can be adjusted using the Size Widget.
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Rel Height:
   </b>
   <i>
    Default:
   </i>
   1,
   <i>
    Range:
   </i>
   0 or greater.
   <br/>
   Scales the vertical dimension of the glares, making
  them elliptical instead of circular.
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Rotate:
   </b>
   <i>
    Default:
   </i>
   0,
   <i>
    Range:
   </i>
   any.
   <br/>
   Rotates the ray elements of the glares, if any, in
  degrees.
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Source Opacity:
   </b>
   <i>
    Default:
   </i>
   1,
   <i>
    Range:
   </i>
   0 or greater.
   <br/>
   Scales the opacity of the Source input when
  combined with the glares.  This does not affect the generation
  of the glares themselves.
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Scale Back:
   </b>
   <i>
    Default:
   </i>
   1,
   <i>
    Range:
   </i>
   0 to 1.
   <br/>
   Scales the brightness of the background.  This parameter
  only has an effect if the background input is provided, and is
  visible due to a partially transparent Source image or a reduced Source
  Opacity parameter value.
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Brightness:
   </b>
   <i>
    Default:
   </i>
   1,
   <i>
    Range:
   </i>
   0 or greater.
   <br/>
   Scales the brightness of all the glares.
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Saturation:
   </b>
   <i>
    Default:
   </i>
   1,
   <i>
    Range:
   </i>
   any.
   <br/>
   Scales the color saturation of the glare elements.
  Increase for more intense colors.  Set to 0 for monochrome glares.
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Rays Num Scale:
   </b>
   <i>
    Default:
   </i>
   1,
   <i>
    Range:
   </i>
   0 or greater.
   <br/>
   Increases or decreases the number of rays.
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Rays Length:
   </b>
   <i>
    Default:
   </i>
   1,
   <i>
    Range:
   </i>
   0 or greater.
   <br/>
   Adjusts the length of the rays without changing their thickness.
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Rays Thickness:
   </b>
   <i>
    Default:
   </i>
   1,
   <i>
    Range:
   </i>
   0 or greater.
   <br/>
   Adjusts the thickness of the individual rays.
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Glare Under Src:
   </b>
   <i>
    Default:
   </i>
   0,
   <i>
    Range:
   </i>
   0 to 1.
   <br/>
   Set to 1 to composite the Source input over the glares.
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Glare From Matte:
   </b>
   <i>
    Default:
   </i>
   0,
   <i>
    Range:
   </i>
   0 to 1.
   <br/>
   Set to 1 to generate glares from the alpha channel
  of the source input instead of the RGB channels.  In this case the glares
  will not pick up color from the source and will typically be brighter.
  Values between 0 and 1 interpolate between using the RGB and the Alpha.
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Scale Colors:
   </b>
   <i>
    Default rgb:
   </i>
   [1 1 1].
   <br/>
   Scales the color of the glares.  The colors and brightnesses
  of the glares are also affected by the Source input.
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Threshold:
   </b>
   <i>
    Default:
   </i>
   0.8,
   <i>
    Range:
   </i>
   0 or greater.
   <br/>
   Glares are generated from locations in the source clip
  that are brighter than this value.  A value of 0.9 causes glares at
  only the brightest spots.  A value of 0 causes glares for every
  non-black area.
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Threshold Add Color:
   </b>
   <i>
    Default rgb:
   </i>
   [0 0 0].
   <br/>
   This can be used to raise the threshold on a
  specific color and thereby reduce the glares generated on areas of the
  source clip containing that color.
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Threshold Blur:
   </b>
   <i>
    Default:
   </i>
   0,
   <i>
    Range:
   </i>
   0 or greater.
   <br/>
   Increase to smooth out the areas creating glares.
  This can be used to eliminate glares generated from small speckles or
  to simply soften the glares.  Increasing this may put more highlights
  below the threshold and darken the resulting glares, but you can
  decrease the Threshold parameter to compensate.
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Glare Res:
   </b>
   <i>
    Popup menu,  Default: Full
   </i>
   .
   <br/>
   Selects the resolution factor for the glares.  Higher
  resolutions give sharper glares, lower resolutions give smoother
  glares and faster processing.  This 'Res' factor only affects the
  glares: the background is still combined with the glares at full
  resolution.
   <br/>
   <dl>
    <dd>
     <b>
      <i>
       Full:
      </i>
     </b>
     Full resolution is used.
     <br/>
     <dd>
      <b>
       <i>
        Half:
       </i>
      </b>
      The glares are calculated at half resolution.
      <br/>
      <dd>
       <b>
        <i>
         Quarter:
        </i>
       </b>
       The glares are calculated at quarter resolution.
       <br/>
      </dd>
     </dd>
    </dd>
   </dl>
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Mask Type:
   </b>
   <i>
    Popup menu,  Default: Luma
   </i>
   .
   <br/>
   This setting is ignored unless the Mask input is provided.
   <br/>
   <dl>
    <dd>
     <b>
      <i>
       Luma:
      </i>
     </b>
     uses the luminance of the Mask input to scale the brightness of the glares.
     <br/>
     <dd>
      <b>
       <i>
        Color:
       </i>
      </b>
      uses the RGB channels of the Mask input to scale the colors of the glares.
      <br/>
     </dd>
    </dd>
   </dl>
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Invert Mask:
   </b>
   <i>
    Check-box,  Default:
   </i>
   off.
   <br/>
   If enabled, inverts the mask input so the effect is applied
to areas where the Mask is black instead of white.
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Comp Premult:
   </b>
   <i>
    Check-box,  Default:
   </i>
   off,
   <i>
    Shared
   </i>
   .
   <br/>
   Enable this for a better composite if the Front
  pixel values have been pre-multiplied by the Matte pixel values.
  This is also known as an 'additive' composite.
  </dd>
 </dl>
 <h3>
  Params2:
 </h3>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Blur Glare:
   </b>
   <i>
    Default:
   </i>
   0,
   <i>
    Range:
   </i>
   0 or greater,
   <i>
    Shared
   </i>
   .
   <br/>
   The glare is blurred by this amount before being combined with the background.
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Hue Shift:
   </b>
   <i>
    Default:
   </i>
   0,
   <i>
    Range:
   </i>
   any,
   <i>
    Shared
   </i>
   .
   <br/>
   Shifts the hue of the glare, in revolutions from red to green to blue to red.
  </dd>
 </dl>
 <h3>
  Params3:
 </h3>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Mocha:
   </b>
   <i>
    Default:
   </i>
   0,
   <i>
    Range:
   </i>
   0 or greater,
   <i>
    Shared
   </i>
   .
   <br/>
   Brings up the Mocha window for tracking footage and
  generating masks.
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Blur Mocha:
   </b>
   <i>
    Default:
   </i>
   0,
   <i>
    Range:
   </i>
   0 or greater,
   <i>
    Shared
   </i>
   .
   <br/>
   Blurs the Mocha Mask by this amount before using.
  This can be used to soften the edges or quantization artifacts of
  the mask, and smooth out the time displacements.
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Mocha Opacity:
   </b>
   <i>
    Default:
   </i>
   1,
   <i>
    Range:
   </i>
   0 to 1,
   <i>
    Shared
   </i>
   .
   <br/>
   Controls the strength of the Mocha mask.
  Lower values reduce the intensity of the effect.
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Invert Mocha:
   </b>
   <i>
    Check-box,  Default:
   </i>
   off,
   <i>
    Shared
   </i>
   .
   <br/>
   If enabled, the black and white of the Mocha Mask
  are inverted before applying the effect.
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Show Mocha Only:
   </b>
   <i>
    Check-box,  Default:
   </i>
   off,
   <i>
    Shared
   </i>
   .
   <br/>
   Bypass the effect and show the Mocha Mask itself.
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Bypass Mocha:
   </b>
   <i>
    Check-box,  Default:
   </i>
   off,
   <i>
    Shared
   </i>
   .
   <br/>
   Ignore the Mocha Mask and apply the effect to the
  entire source clip.
  </dd>
 </dl>
 <p>
 </p>
 <dl>
  <dd>
   <b>
    Combine Masks:
   </b>
   <i>
    Popup menu,  Default: Union
   </i>
   .
   <br/>
   Determines how to combine the Mocha Mask and Input
  Mask when both are supplied to the effect.
   <br/>
   <dl>
    <dd>
     <b>
      <i>
       Union:
      </i>
     </b>
     Uses the area covered by both masks together.
     <br/>
     <dd>
      <b>
       <i>
        Intersect:
       </i>
      </b>
      Uses the area that overlaps between the two masks.
      <br/>
      <dd>
       <b>
        <i>
         Mocha Only:
        </i>
       </b>
       Ignore the Input Mask and only use the
  Mocha Mask.
       <br/>
      </dd>
     </dd>
    </dd>
   </dl>
  </dd>
 </dl>
 See general info for:
 <a href="../general-info#res-options">
  Res
 </a>
 ,
 <a href="../general-info#on-fields">
  On Fields
 </a>
 ,
 <a href="../general-info#redraw-modes">
  Redraw
 </a>
 ,
 <a href="../general-info#undo">
  Undo
 </a>
 ,
 <a href="../general-info#undo">
  Load Defaults
 </a>
 ,
 <a href="../general-info#cropping">
  Crop
 </a>
 ,
 <a href="../general-info#add-noise">
  Add Noise
 </a>
 , and
 <a href="../general-info#colorspace">
  Use Gamma
 </a>
 .
 <p>
  <br/>
 </p>
 <h3>
  See Also:
 </h3>
 <dl>
  <dd>
   <table border="0" cellpadding="0" cellspacing="0">
    <tr>
     <td valign="top">
     </td>
     <td valign="top">
      <a href="../glare">
       Glare
      </a>
      <br/>
      <a href="../glaremask">
       GlareMask
      </a>
      <br/>
      <a href="../glarecomp">
       GlareComp
      </a>
      <br/>
     </td>
     <td width="40">
     </td>
     <td valign="top">
      <a href="../glint">
       Glint
      </a>
      <br/>
      <a href="../glow">
       Glow
      </a>
      <br/>
      <a href="../lensflare">
       LensFlare
      </a>
      <br/>
      <a href="../convolve">
       Convolve
      </a>
      <br/>
     </td>
     <td width="40">
     </td>
     <td valign="top">
      <a href="../intro">
       Sapphire Plug-ins Introduction
      </a>
     </td>
    </tr>
   </table>
  </dd>
 </dl>
